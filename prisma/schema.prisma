generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model account {
  balance                                           Float
  UserId                                            Int
  CurrencyId                                        Int
  account_guid                                      String        @default(uuid())
  account_id                                        Int           @id @default(autoincrement())
  currency                                          currency      @relation(fields: [CurrencyId], references: [currency_id], map: "Account_CurrencyId_fkey")
  user                                              user          @relation(fields: [UserId], references: [user_id], map: "Account_UserId_fkey")
  transaction_transaction_DestinyAccountIdToaccount transaction[] @relation("transaction_DestinyAccountIdToaccount")
  transaction_transaction_OriginAccountIdToaccount  transaction[] @relation("transaction_OriginAccountIdToaccount")

  @@index([CurrencyId], map: "Account_CurrencyId_fkey")
  @@index([UserId], map: "Account_UserId_fkey")
}

model currency {
  currency_guid   String    @default(uuid())
  currency_id     Int       @id @default(autoincrement())
  currency_name   String
  currency_symbol String
  account         account[]
}

model transaction {
  amount                                        Float
  description                                   String?
  OriginAccountId                               Int
  DestinyAccountId                              Int
  created                                       DateTime
  transaction_guid                              String   @default(uuid())
  transaction_id                                Int      @id @default(autoincrement())
  account_transaction_DestinyAccountIdToaccount account  @relation("transaction_DestinyAccountIdToaccount", fields: [DestinyAccountId], references: [account_id], map: "Transaction_DestinyAccountId_fkey")
  account_transaction_OriginAccountIdToaccount  account  @relation("transaction_OriginAccountIdToaccount", fields: [OriginAccountId], references: [account_id], map: "Transaction_OriginAccountId_fkey")

  @@index([DestinyAccountId], map: "Transaction_DestinyAccountId_fkey")
  @@index([OriginAccountId], map: "Transaction_OriginAccountId_fkey")
}

model user {
  password  String
  name      String
  lastname  String
  user_guid String    @default(uuid())
  user_id   Int       @id @default(autoincrement())
  username  String
  account   account[]
}
